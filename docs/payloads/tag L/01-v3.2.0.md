---
sidebar_label: firmware v3.2.0
---

# Payload Format of tag L

<br></br>
## Uplinks
<br></br>

### BLE scan (Uplink, Port 3)
> *requires firmware version v2.1.1 or higher

| Byte | Size | Description                               | Format      |
|------|------|-------------------------------------------|-------------|
| 0    | 2    | Scan pointer                              | uint16       |
| 2    | 1    | Total messages                            | uint8       |
| 3    | 1    | #Message                                  | uint8       |
| 4-9  | 6    | MAC1                                      | 6 x uint8   |
| 10   | 1    | RSSI1                                     | int8        |
| …    |      |                                           |             |
|      | 6    | MACN                                      | 6 x uint8   |
|      | 1    | RSSIN                                     | int8        |

If there are more than 6 BLE Beacons the messages will be split into multiple uplinks. 

The `Total messages` indicate how many uplinks are expected. 

and the `#Message` indicates the current message out of all the uplinks.

`Scan pointer` is incremented with every measurement.


### Current Config/Status Packet (Uplink, Port 4)

| Byte  | Size | Description                                 | Format     |
|-------|------|---------------------------------------------|------------|
| 0-3   | 4    | Localization interval while moving, IM      | uint32, s  |
| 4-7   | 4    | Localization interval while steady, IS      | uint32, s  |
| 8-11  | 4    | Config/Status interval, IC                  | uint32, s  |
| 12-13 | 2    | GPS timeout while waiting for fix           | uint16, s  |
| 14-15 | 2    | Accelerometer wakeup threshold              | uint16, mg |
| 16-17 | 2    | Accelerometer delay                         | uint16, ms |
| 18    | 1    | Device state (moving = 1, steady = 2)       | uint8      |
| 19-21 | 3    | Firmware version (major,;minor; patch)      | 3 x uint8  |
| 22-23 | 2    | Hardware version (type; revision)           | 2 x uint8  |
| 24-27 | 4    | Battery “keep-alive” message interval, IB   | uint32, s  |

### Status[6:2]

Status is only sent after a Config Downlink as an acknowledgement in the next Uplink. 4 bit [6:3] conf_change_id plus 1 bit [2] for success (=1) or failure (=0). conf_change_id counter resets after reaching 15 (1111).

### WiFi Packet (Uplink, Port 5)

| Byte | Size | Description                               | Format      |
|------|------|-------------------------------------------|-------------|
| 0    | 1    | Status[6:2] + Moving flag[0] (moving = 1) | uint8       |
| 1-6  | 6    | MAC1                                      | 6 x uint8   |
| 7    | 1    | RSSI1                                     | int8        |
| …    |      |                                           |             |
|      | 6    | MACN                                      | 6 x uint8   |
|      | 1    | RSSIN                                     | int8        |

### Button Alarm Packet (Uplink, Port 6)

| Byte | Size | Description                               | Format                   |
|------|------|-------------------------------------------|--------------------------|
| 0    | 1    | In case of a button-press 0x01 is sent | uint8                    |


### WiFi with timestamp (Uplink, Port 7)
Depending on the number of detected WiFi Access Points (AP), the payload size varies between 12 - 47 bytes (1-6 APs). 

| Byte | Size | Description                               | Format      |
|------|------|-------------------------------------------|-------------|
| 0-3  | 4    | Unix TS                                   |                  |
| 4    | 1    | Status                                    |                  |
|5-10  | 6    | Mac1                                      |                  |
| 11   |  1   | Rssi1                                     |                  |
|   …  |      | …                                         |                  |
|      | 6    | MacN                                      |                  |
|      | 1    | RssiN                                     |                  |

### GNSS (Uplink, Port 10)

| Byte | Size | Description                               | Format      |
|------|------|-------------------------------------------|-------------|
| 0    | 1    | Status                                    |        |
| 1-4  | 4    | Latitude                                  |    |
| 5-8  | 4    | Longitude                                 |         |
| 9-10 | 2    | Altitude                                  |             |
| 11-14| 4    | Unix TS                                   |   |
| 15-16| 2    | Battery                                   |    In mV     |
|  17  | 1    | TTF                                       |     seconds    |
|  18  | 1    | PDOP                                      |     1/2 meter    |
|  19  | 1    | #satellites                               |         |



### Battery Packet (Uplink, Port 15)

| Byte | Size | Description                                 | Format                   |
|------|------|---------------------------------------------|--------------------------|
| 0    | 1    | Status[6:2] + Low battery flag[0] (low = 1) | uint8                    |
| 1-2  | 2    | Battery voltage                             | uint16, mV               |



<br></br>
## Downlinks
<br></br>


### Set Config Packet (Downlink, Port 128)

| Byte  | Size | Description                                 | Format      |
|-------|------|---------------------------------------------|-------------|
| 0     | 1    | BLE (disable = 0, enable = 1)               | uint8       |
| 1     | 1    | GPS (disable = 0, enable = 1)               | uint8       |
| 2     | 1    | WiFi (disable = 0, enable = 1)              | uint8       |
| 3-6   | 4    | Localization interval while moving, IM      | uint32, s   |
| 7-10  | 4    | Localization interval while steady, IS      | uint32, s   |
| 11-14 | 4    | Hearbeat interval, IH                       | uint32, s   |
| 15-16 | 2    | GPS timeout while waiting for fix           | uint16, s   |
| 17-18 | 2    | Accelerometer wakeup threshold              | uint16, mg  |
| 19-20 | 2    | Accelerometer delay                         | uint16, ms  |
| 21-24 | 4    | Battery “keep-alive” message interval, IB   | uint32, s   |


### Buzzer Packet (Downlink, Port 129)

| Byte | Size | Description                               | Format                   |
|------|------|-------------------------------------------|--------------------------|
| 0    | 1    | Time to buzz (buzzer off = 0) | uint8, s                    |

### Off Packet (Downlink, Port 130)

| Byte | Size | Description                               | Format                   |
|------|------|-------------------------------------------|--------------------------|
| 0    | 1    | Power off = 0 | uint8                    |


### GPS Accuracy Booster (Downlink, Port 131)

| Byte | Size | Description                               | Format                   |
|------|------|-------------------------------------------|--------------------------|
| 0    | 1    | Accuracy enhancement | uint8, s [0..59]                   |

### Erase flash (Downlink, Port 132)

| Byte | Size | Description                               | Format      |
|------|------|-------------------------------------------|-------------|
| 0  | 1    | Erase                                   |        0x00          |

### Enable/disable buzzer feedback upon magnet interaction (Downlink, Port 133)
> *requires firmware version v2.1.2 or higher

| Byte | Size | Description                               | Format                   |
|------|------|-------------------------------------------|--------------------------|
| 0    | 1    | 0x00 - diasble, 0x01 - enable                    |


### BLE config (Downlink, Port 134) 

Payloads use big endian data encoding.
Min RSSI value is a signed integer and uses two’s complement for encoding.
The Advertising name filter string must be zero-terminated. (0x00). This condition does not apply to filtering enabled for eddystone namespace (Scan mode: 2)
If Min RSSI value is 0, there is no filtering applied for RSSI.
If Max beacons is 0, there will be no limit of how many beacons will be sent.
If Scan time is 0, there is no scanning performed on the device.


| Byte | Size | Description                               | Format      |
|------|------|-------------------------------------------|-------------|
| 0-1  | 2    | Scan interval                              |     s             |
| 2    | 1    | Scan time                             |          (0-180)s        |
| 3    | 1    | Max beacons                          |                  |
| 4  | 1    | Min. Rssi value                              |                  |
| 5-14   | 10    | Advertising name/eddystone namespace filter |   ASCII               |
|   15-16   |  2    | Accelerometer trigger hold timer            |       s           |
|  17-18    | 2    | Accelerometer threshold                      |       mg           |
|   19   | 1    | Scan mode                                     |      0 - no filter, 1 - advertised name filter, 2 - eddystone namespace filter            |

### BLE scan on-demand (Downlink, Port 135)

| Byte | Size | Description                               | Format                   |
|------|------|-------------------------------------------|--------------------------|
| 0    | 1    | Erase | 0x00                   |



